<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>The Be Book - Classes And Methods - The Media Kit</title><link rel="stylesheet" href="be_book.css" type="text/css" media="all" /><link rel="shortcut icon" type="image/vnd.microsoft.icon" href="./images/favicon.ico" /><!--[if IE]>
    <link rel="stylesheet" type="text/css" href="be_book_ie.css" />
    <![endif]--><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><meta name="keywords" content="Access, BeOS, BeBook, API" /><link rel="start" href="index.html" title="The Be Book" /><link rel="up" href="TheMediaKit.html" title="The Media Kit" /><link rel="prev" href="BMediaTheme.html" title="BMediaTheme" /><link rel="next" href="BNullParameter.html" title="BNullParameter" /></head><body><div id="header"><div id="headerT"><div id="headerTL"><a accesskey="p" href="BMediaTheme.html" title="BMediaTheme"><img src="./images/navigation/prev.png" alt="Prev" /></a> <a accesskey="u" href="TheMediaKit.html" title="The Media Kit"><img src="./images/navigation/up.png" alt="Up" /></a> <a accesskey="n" href="BNullParameter.html" title="BNullParameter"><img src="./images/navigation/next.png" alt="Next" /></a></div><div id="headerTR"><div id="navigpeople"><a href="http://www.haiku-os.org"><img src="./images/People_24.png" alt="haiku-os.org" title="Visit The Haiku Website" /></a></div><div class="navighome" title="Home"><a accesskey="h" href="index.html"><img src="./images/navigation/home.png" alt="Home" /></a></div><div class="navigboxed" id="navigindex"><a accesskey="i" href="ClassIndex.html" title="Index">I</a></div><div class="navigboxed" id="naviglang" title="English">en</div></div><div id="headerTC">The Be Book - Classes And Methods - The Media Kit</div></div><div id="headerB">Prev: <a href="BMediaTheme.html">BMediaTheme</a>  Up: <a href="TheMediaKit.html">The Media Kit</a>  Next: <a href="BNullParameter.html">BNullParameter</a></div><hr /></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack"></a>BMediaTrack</h2></div></div></div><a id="id1160551" class="indexterm"></a><div class="classheader"><table border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><table width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>Derived From:</td><td>–</td></tr><tr><td>Mix-in Classes:</td><td>–</td></tr><tr><td>Declared In:</td><td><code class="filename">media/MediaTrack.h</code></td></tr><tr><td>Library:</td><td><code class="filename">libmedia.so</code></td></tr><tr><td>Allocation:</td><td>Constructor only</td></tr></tbody></table></td><td>
<a class="link overview" href="BMediaTrack_Overview.html" title="BMediaTrack">Class Overview</a>
<div class="toc"><ul><li><span class="section"><a href="BMediaTrack.html#BMediaTrack_ConstructorDestructor">Constructor and Destructor</a></span></li><li><span class="section"><a href="BMediaTrack.html#BMediaTrack_MemberFunctions">Member Functions</a></span></li><li><span class="section"><a href="BMediaTrack.html#BMediaTrack_Constants">Constants</a></span></li></ul></div>
</td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_ConstructorDestructor"></a>Constructor and Destructor</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_Destructor"></a>~BMediaTrack()</h4></div></div></div><code class="destructorsynopsis cpp"><span class="modifier">virtual </span><span class="methodname">BMediaTrack</span>();</code><p>Destructor. You shouldn't delete a <code class="classname">BMediaTrack</code> directly; instead, use
<a class="link" href="BMediaFile.html#BMediaFile_ReleaseTrack" title="ReleaseTrack(), ReleaseAllTracks()"><code class="methodname">BMediaFile::ReleaseTrack()</code></a> or
<a class="link" href="BMediaFile.html#BMediaFile_ReleaseAllTracks"><code class="methodname">BMediaFile::ReleaseAllTracks()</code></a>,
or let
<a class="link" href="BMediaFile.html" title="BMediaFile"><code class="classname">BMediaFile</code></a>
destroy the track objects when it's deleted.</p></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_MemberFunctions"></a>Member Functions</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_AddCopyright"></a>AddCopyright()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddCopyright</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">data</span></span>) <span class="modifier">const</span>;</code><p>Sets the track's copyright notice to the text specified by data,
replacing the existing copyright notice if one exists.</p><div class="admonition warning"><div class="title">Warning</div><div class="graphic"><img class="icon" alt="Warning" width="32" src="./images/admonitions/Stop_32.png" /><div class="text"><p>The <code class="classname">BMediaTrack</code> class doesn't automatically perform any locking to
prevent multiple writes to the track from occurring at the same time. If
you have multiple threads writing into the same <code class="classname">BMediaTrack</code>, you must use
a locking mechanism (such as a semaphore) to keep writes from overlapping.</p></div></div></div><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code></span></p></td><td><p>The copyright was set.</p></td></tr><tr><td><p><span class="term"><code class="constant">EPERM</code></span></p></td><td><p>The file isn't opened for writing.</p></td></tr><tr><td><p><span class="term">Other errors.</span></p></td><td><p>Are codec dependant.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_AddTrackInfo"></a>AddTrackInfo()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddTrackInfo</span>(<span class="methodparam"><span class="type">uint32 </span><span class="parameter">code</span></span>,<br />                      <span class="methodparam"><span class="modifier">const </span><span class="type">void* </span><span class="parameter">data</span></span>,<br />                      <span class="methodparam"><span class="type">size_t </span><span class="parameter">size</span></span>,<br />                      <span class="methodparam"><span class="type">uint32 </span><span class="parameter">flags</span><span class="initializer"> = 0</span></span>) <span class="modifier">const</span>;</code><p>Adds an informational record of the specified type to the track. The
record is specified by the <code class="parameter">data</code> pointer,
and is <code class="parameter">size</code> bytes long. flags
contains flags that modify the operation (none are defined at this time).</p><div class="admonition warning"><div class="title">Warning</div><div class="graphic"><img class="icon" alt="Warning" width="32" src="./images/admonitions/Stop_32.png" /><div class="text"><p>The <code class="classname">BMediaTrack</code> class doesn't automatically perform any locking to
prevent multiple writes to the track from occurring at the same time. If
you have multiple threads writing into the same <code class="classname">BMediaTrack</code>, you must use
a locking mechanism (such as a semaphore) to keep writes from overlapping.</p></div></div></div><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code></span></p></td><td><p>The format was successfully returned.</p></td></tr><tr><td><p><span class="term">Other errors.</span></p></td><td><p>The error returned depends on the codec interpreting the data.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_CountFrames"></a>CountFrames()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">int64 </span><span class="methodname">CountFrames</span>() <span class="modifier">const</span>;</code><p>Returns the total number of frames in the track.</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_CurrentFrame"></a>CurrentFrame()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">int64 </span><span class="methodname">CurrentFrame</span>() <span class="modifier">const</span>;</code><p>Returns the current frame in the track (the frame that will be read next
by <a class="link" href="BMediaTrack.html#BMediaTrack_ReadFrames" title="ReadFrames()"><code class="methodname">ReadFrames()</code></a>.</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_CurrentTime"></a>CurrentTime()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">bigtime_t </span><span class="methodname">CurrentTime</span>() <span class="modifier">const</span>;</code><p>Returns the current position within the track, expressed in microseconds
since the start of the track.</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_DecodedFormat"></a>DecodedFormat()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">DecodedFormat</span>(<span class="methodparam"><span class="type">media_format* </span><span class="parameter">ioFormat</span></span>) <span class="modifier">const</span>;</code><p>Negotiates the format that the codec will output when decoding the
track's data. Pass in <code class="parameter">ioFormat</code> the format that you want (with wildcards
as applicable). The codec will find and return in <code class="parameter">ioFormat</code> its best
matching format; this format will then be used when outputting decoded
data via
<a class="link" href="BMediaTrack.html#BMediaTrack_ReadFrames" title="ReadFrames()"><code class="methodname">ReadFrames()</code></a>.</p><p>The format is typically of a
<code class="constant">B_MEDIA_RAW_AUDIO</code>
or <code class="constant">B_MEDIA_RAW_VIDEO</code>
flavor.</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code></span></p></td><td><p>The format was successfully negotiated and returned.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_ERROR</code></span></p></td><td><p>The <code class="classname">BMediaTrack</code> wasn't properly initialized, or there's no
codec for the track's data.</p></td></tr><tr><td><p><span class="term">Other errors.</span></p></td><td><p>The error returned depends on the codec interpreting the data.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_Duration"></a>Duration()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">bigtime_t </span><span class="methodname">Duration</span>() <span class="modifier">const</span>;</code><p>Returns the total duration of the track, in microseconds.</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_EncodedFormat"></a>EncodedFormat()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">EncodedFormat</span>(<span class="methodparam"><span class="type">media_format* </span><span class="parameter">outFormat</span></span>) <span class="modifier">const</span>;</code><p>Returns the "native" encoded format of the track's data. This is the
format of the data returned by
<a class="link" href="BMediaTrack.html#BMediaTrack_ReadChunk" title="ReadChunk()"><code class="methodname">ReadChunk()</code></a>.</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code></span></p></td><td><p>The format was successfully returned.</p></td></tr><tr><td><p><span class="term">Other errors.</span></p></td><td><p>The error returned depends on the codec interpreting the data.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_FindKeyFrameForTime"></a><a id="BMediaTrack_FindKeyFrameForFrame"></a>
FindKeyFrameForTime(), FindKeyFrameForFrame()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindKeyFrameForTime</span>(<span class="methodparam"><span class="type">bigtime_t* </span><span class="parameter">inOutTime</span></span>,<br />                             <span class="methodparam"><span class="type">int32 </span><span class="parameter">flags</span><span class="initializer"> = 0</span></span>) <span class="modifier">const</span>;</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindKeyFrameForFrame</span>(<span class="methodparam"><span class="type">int64* </span><span class="parameter">inOutFrame</span></span>,<br />                              <span class="methodparam"><span class="type">int32 </span><span class="parameter">flags</span><span class="initializer"> = 0</span></span>) <span class="modifier">const</span>;</code><p><code class="methodname">FindKeyFrameForTime()</code> accepts in
<code class="parameter">inOutTime</code> a time, and returns in
<code class="parameter">inOutTime</code> the time at which the closest key
frame to that time begins. Likewise,
<code class="methodname">FindKeyFrameForFrame()</code> returns the closest key
frame number to the specified frame.</p><p>The <code class="parameter">flags</code> argument lets you indicate
whether to seek forward or backward for the key frame.</p><p>If you want to find the nearest key frame before the indicated
frame or time, specify
<a class="link" href="BMediaTrack.html#B_MEDIA_SEEK_CLOSEST_BACKWARD"><code class="constant">B_MEDIA_SEEK_CLOSEST_BACKWARD</code></a>
in flags. If you want to find the nearest key frame after the indicated frame or time,
specify
<a class="link" href="BMediaTrack.html#B_MEDIA_SEEK_CLOSEST_FORWARD"><code class="constant">B_MEDIA_SEEK_CLOSEST_FORWARD</code></a>.</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_Flush"></a>Flush()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">Flush</span>();</code><p>Flushes all buffered encoded data to disk; you should call this function
after you've finished writing the last frame to the track. This ensures
that everything's flushed at the right offset into the file.</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code></span></p></td><td><p>The buffers were flushed.</p></td></tr><tr><td><p><span class="term">Other errors.</span></p></td><td><p>Are codec dependant</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_GetCodecInfo"></a>GetCodecInfo()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">GetCodecInfo</span>(<span class="methodparam"><span class="type">media_codec_info* </span><span class="parameter">codecInfo</span></span>) <span class="modifier">const</span>;</code><p>Returns information about the codec being used to read or write the
track's data.</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code></span></p></td><td><p>The codec info was returned.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_BAD_TYPE</code></span></p></td><td><p>There's no valid codec in use by the track.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_GetEncodeParameters"></a><a id="BMediaTrack_SetEncodeParameters"></a>
GetEncodeParameters(), SetEncodeParameters()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">GetEncodeParameters</span>(<span class="methodparam"><span class="type">encode_parameters* </span><span class="parameter">parameters</span></span>) <span class="modifier">const</span>;</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">SetEncodeParameters</span>(<span class="methodparam"><span class="type">encode_parameters* </span><span class="parameter">parameters</span></span>);</code><p><code class="methodname">GetEncodeParameters()</code> returns the
<span class="type">encode_parameters</span>
being used when encoding data on the track.</p><p><code class="methodname">SetEncodeParameters()</code> changes the
<span class="type">encode_parameters</span>
being used while encoding data.</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_GetParameterView"></a>GetParameterView()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type"><a class="link" href="BView.html" title="BView"><code class="classname">BView</code></a>* </span><span class="methodname">GetParameterView</span>();</code><p>Returns a
<a class="link" href="BView.html" title="BView"><code class="classname">BView</code></a>
containing controls for adjusting the codec's and track's
parameters. Returns <code class="constant">NULL</code> if there isn't a view available.</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_InitCheck"></a>InitCheck()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">InitCheck</span>() <span class="modifier">const</span>;</code><p>Returns a status code indicating whether or not the track was
successfully and completely instantiated.</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code></span></p></td><td><p>The track was constructed properly.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_BAD_VALUE</code></span></p></td><td><p>An error occurred setting up the track.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_ReadChunk"></a>ReadChunk()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReadChunk</span>(<span class="methodparam"><span class="type">char** </span><span class="parameter">outBuffer</span></span>,<br />                   <span class="methodparam"><span class="type">int32* </span><span class="parameter">ioSize</span></span>,<br />                   <span class="methodparam"><span class="type">media_header* </span><span class="parameter">header</span><span class="initializer"> = <span class="constant">NULL</span></span></span>);</code><p>Returns in <code class="parameter">outBuffer</code> a pointer
to the next <code class="parameter">ioSize</code> bytes of the media
track; the actual number of bytes returned is returned in <code class="parameter">ioSize</code>; this
may be different if the end of the track is reached. The header is set to
describe the returned buffer.</p><p>The data returned by this function isn't decoded. Typically you'll only
use this function if there's no codec available to decode the media data.</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code></span></p></td><td><p>The format was successfully negotiated and returned.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_ERROR</code></span></p></td><td><p>The <code class="classname">BMediaTrack</code> wasn't properly initialized, or there's no
codec for the track's data.</p></td></tr><tr><td><p><span class="term">Other errors.</span></p></td><td><p>The error returned depends on the codec interpreting
the data.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_ReadFrames"></a>ReadFrames()</h4></div></div></div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReadFrames</span>(<span class="methodparam"><span class="type">void* </span><span class="parameter">outBuffer</span></span>,<br />                    <span class="methodparam"><span class="type">int64* </span><span class="parameter">outFrameCount</span></span>,<br />                    <span class="methodparam"><span class="type">media_header* </span><span class="parameter">outHeader</span><span class="initializer"> = <span class="constant">NULL</span></span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReadFrames</span>(<span class="methodparam"><span class="type">void* </span><span class="parameter">outBuffer</span></span>,<br />                    <span class="methodparam"><span class="type">int64* </span><span class="parameter">outFrameCount</span></span>,<br />                    <span class="methodparam"><span class="type">media_header* </span><span class="parameter">outHeader</span></span>,<br />                    <span class="methodparam"><span class="type">media_decode_info* </span><span class="parameter">info</span></span>);</code>
</div><p>Fills the buffer pointed to by <code class="parameter">outBuffer</code> with the next frames or samples
from the track, starting at the current position. For video tracks, the
next frame of video is decoded and stored into the output buffer. For
audio tracks, the buffer is filled with the number of frames negotiated
using
<a class="link" href="BMediaTrack.html#BMediaTrack_DecodedFormat" title="DecodedFormat()"><code class="methodname">DecodedFormat()</code></a>.
If the end of the track is reached before the
buffer is filled, a partial buffer will be returned.</p><p>On return, <code class="parameter">outFrameCount</code> indicates the number of frames returned, and
<code class="parameter">outHeader</code>, if you specified a non-<code class="constant">NULL</code> value, contains the header of the
buffer containing the frame or frames. You can obtain useful information
(such as the media start time for the buffer) from the header.</p><p>The second form of this function lets you provide a
<a class="link" href="TheMediaKit_DefinedTypes.html#media_decode_info" title="media_decode_info"><span class="type">media_decode_info</span></a>
structure to provide additional information to the decoder, such as how
much time it's allowed to use to decode the data and format- and
codec-specific information.</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code></span></p></td><td><p>The frames have been returned.</p></td></tr><tr><td><p><span class="term"><code class="constant">EPERM</code></span></p></td><td><p>The file wasn't opened for reading.</p></td></tr><tr><td><p><span class="term">Other errors.</span></p></td><td><p>The error returned depends on the codec interpreting
the data.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_ReplaceFrames"></a>ReplaceFrames()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceFrames</span>(<span class="methodparam"><span class="type">void* </span><span class="parameter">inBuffer</span></span>,<br />                       <span class="methodparam"><span class="type">int64* </span><span class="parameter">ioFrameCount</span></span>,<br />                       <span class="methodparam"><span class="type">media_header* </span><span class="parameter">header</span></span>);</code><p>Replaces the number of frames specified in <code class="parameter">ioFrameCount</code> in the track.
<code class="parameter">inBuffer</code> points to the source buffer for the new frames.</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_SeekToFrame"></a><a id="BMediaTrack_SeekToTime"></a>
SeekToFrame(), SeekToTime()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">SeekToFrame</span>(<span class="methodparam"><span class="type">int64* </span><span class="parameter">ioFrame</span></span>,<br />                     <span class="methodparam"><span class="type">int32 </span><span class="parameter">flags</span><span class="initializer"> = 0</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">SeekToTime</span>(<span class="methodparam"><span class="type">bigtime_t* </span><span class="parameter">ioTime</span></span>,<br />                    <span class="methodparam"><span class="type">int32 </span><span class="parameter">flags</span><span class="initializer"> = 0</span></span>);</code><p>Seeks to the specified position in the track.
<code class="methodname">SeekToFrame()</code> accepts a destination position
as a frame number, and <code class="methodname">SeekToTime()</code> accepts a
destination position as time in microseconds. They each return (in
<code class="parameter">ioFrame</code> or in <code class="parameter">ioTime</code>)
the position to which they actually moved.</p><p>For example, if a video codec is only capable of seeking to key
frames, the returned <code class="parameter">ioFrame</code> might be different
than the one specified on input.</p><p>If you want to seek explicitly to the nearest key frame before the
current frame, specify
<a class="link" href="BMediaTrack.html#B_MEDIA_SEEK_CLOSEST_BACKWARD"><code class="constant">B_MEDIA_SEEK_CLOSEST_BACKWARD</code></a>
in <code class="parameter">flags</code>. If you want to find the nearest key frame
after the current time, specify
<a class="link" href="BMediaTrack.html#B_MEDIA_SEEK_CLOSEST_FORWARD"><code class="constant">B_MEDIA_SEEK_CLOSEST_FORWARD</code></a>.</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code></span></p></td><td><p>The format was successfully returned.</p></td></tr><tr><td><p><span class="term">Other errors.</span></p></td><td><p>The error returned depends on the codec interpreting
the data.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_SetParameterValue"></a><a id="BMediaTrack_GetParameterValue"></a>
SetParameterValue(), GetParameterValue()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">SetParameterValue</span>(<span class="methodparam"><span class="type">int32 </span><span class="parameter">id</span></span>,<br />                           <span class="methodparam"><span class="modifier">const </span><span class="type">void* </span><span class="parameter">value</span></span>,<br />                           <span class="methodparam"><span class="type">size_t* </span><span class="parameter">size</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">GetParameterValue</span>(<span class="methodparam"><span class="type">int32 </span><span class="parameter">id</span></span>,<br />                           <span class="methodparam"><span class="modifier">const </span><span class="type">void* </span><span class="parameter">value</span></span>,<br />                           <span class="methodparam"><span class="type">size_t* </span><span class="parameter">size</span></span>);</code><p><code class="methodname">SetParameterValue()</code> sets the value
of the parameter specified by <code class="parameter">id</code> to
the data pointed to by <code class="parameter">value</code>; this data is
<code class="parameter">size</code> bytes long.</p><p><code class="methodname">GetParameterValue()</code> returns
in <code class="parameter">value</code> the value of the specified
parameter, and the size of the value in bytes in the
<code class="parameter">size</code> argument.</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code></span></p></td><td><p>No error.</p></td></tr><tr><td><p><span class="term"><code class="constant">EPERM</code></span></p></td><td><p>The codec isn't configurable.</p></td></tr><tr><td><p><span class="term">Other errors.</span></p></td><td><p>Are codec dependant.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_SetQuality"></a><a id="BMediaTrack_GetQuality"></a>
SetQuality(), GetQuality()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">SetQuality</span>(<span class="methodparam"><span class="type">float </span><span class="parameter">quality</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">GetQuality</span>(<span class="methodparam"><span class="type">float* </span><span class="parameter">quality</span></span>);</code><p>These functions set and return the codec's quality setting (where 1.0
means maximum quality).</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code></span></p></td><td><p>No error.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_ERROR</code></span></p></td><td><p>The codec doesn't support a quality setting.</p></td></tr><tr><td><p><span class="term">Other errors.</span></p></td><td><p>Are codec dependant.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_Web"></a>Web()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type"><a class="link" href="BParameterWeb.html" title="BParameterWeb"><code class="classname">BParameterWeb</code></a>* </span><span class="methodname">Web</span>();</code><p>Returns a
<a class="link" href="BParameterWeb.html" title="BParameterWeb"><code class="classname">BParameterWeb</code></a>
that can be used for configuring the track and
codec. Returns <code class="constant">NULL</code> if the codec doesn't support user configuration.</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_WriteChunk"></a>WriteChunk()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">WriteChunk</span>(<span class="methodparam"><span class="type">void* </span><span class="parameter">data</span></span>,<br />                    <span class="methodparam"><span class="type">size_t </span><span class="parameter">size</span></span>,<br />                    <span class="methodparam"><span class="type">int32 </span><span class="parameter">flags</span><span class="initializer"> = 0</span></span>);</code><p>Writes the data pointed to by <code class="parameter">data</code>,
which contains <code class="parameter">size</code> bytes of data,
into the track. Specify <code class="constant">B_MEDIA_KEY_FRAME</code>
for <code class="parameter">flags</code> if the frame is a key
frame. It's assumed that the data is already encoded.</p><div class="admonition note"><div class="title">Note</div><div class="graphic"><img class="icon" alt="Note" width="32" src="./images/admonitions/Info_32.png" /><div class="text"><p>The <code class="classname">BMediaTrack</code> class doesn't automatically perform any locking to
prevent multiple writes to the track from occurring at the same time. If
you have multiple threads writing into the same <code class="classname">BMediaTrack</code>, you must use
a locking mechanism (such as a semaphore) to keep writes from overlapping.</p></div></div></div><p>In general, you should only use <code class="methodname">WriteChunk()</code> if you're reading compressed
data from one file and copying it into another, without trying to
interpret the data.</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code></span></p></td><td><p>The data has been written.</p></td></tr><tr><td><p><span class="term"><code class="constant">EPERM</code></span></p></td><td><p>The file wasn't opened for writing.</p></td></tr><tr><td><p><span class="term">Other errors.</span></p></td><td><p>The error returned depends on the codec interpreting
the data.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_WriteFrames"></a>WriteFrames()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">WriteFrames</span>(<span class="methodparam"><span class="type">void* </span><span class="parameter">data</span></span>,<br />                     <span class="methodparam"><span class="type">int32 </span><span class="parameter">numFrames</span></span>,<br />                     <span class="methodparam"><span class="type">int32 </span><span class="parameter">flags</span><span class="initializer"> = 0</span></span>);</code><p>Writes the data pointed to by <code class="parameter">data</code>,
which contains <code class="parameter">numFrame</code> frames, into
the track. Specify <code class="constant">B_MEDIA_KEY_FRAME</code> for
<code class="parameter">flags</code> if the frame is a key frame.</p><div class="admonition note"><div class="title">Note</div><div class="graphic"><img class="icon" alt="Note" width="32" src="./images/admonitions/Info_32.png" /><div class="text"><p>The <code class="classname">BMediaTrack</code> class doesn't automatically perform any locking to
prevent multiple writes to the track from occurring at the same time. If
you have multiple threads writing into the same <code class="classname">BMediaTrack</code>, you must use
a locking mechanism (such as a semaphore) to keep writes from overlapping.</p></div></div></div><p>You always have to select an encoder before writing frames into a media
track, even if the data is raw audio or video. When writing raw audio or
video data into a <code class="classname">BMediaTrack</code>, you need to use the raw encoder. Even
though this doesn't transform the data, it sets up internal data that's
necessary for the file to be played back properly after it's created.</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code></span></p></td><td><p>The frames have been written.</p></td></tr><tr><td><p><span class="term"><code class="constant">EPERM</code></span></p></td><td><p>The file wasn't opened for writing.</p></td></tr><tr><td><p><span class="term">Other errors.</span></p></td><td><p>The error returned depends on the codec interpreting
the data.</p></td></tr></tbody></table></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMediaTrack_Constants"></a>Constants</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Enums_media_seek_type"></a><a id="B_MEDIA_SEEK_CLOSEST_FORWARD"></a>
<a id="B_MEDIA_SEEK_CLOSEST_BACKWARD"></a>
<a id="B_MEDIA_SEEK_DIRECTION_MASK"></a>
media_seek_type</h4></div></div></div><p>Declared in: <code class="filename">media/MediaTrack.h</code></p><table class="variablelist constants"><thead><tr><th>Constant</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_MEDIA_SEEK_CLOSEST_FORWARD</code></span></p></td><td><p>Seek to the nearest key frame after the
current position in the track.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_MEDIA_SEEK_CLOSEST_BACKWARD</code></span></p></td><td><p>Seek to the nearest key frame before the
current position in the track.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_MEDIA_SEEK_DIRECTION_MASK</code></span></p></td><td><p>Mask the seek flags with this value to obtain
the seek direction.</p></td></tr></tbody></table><p>These flags, used when calling
<a class="link" href="BMediaTrack.html#BMediaTrack_SeekToTime"><code class="methodname">SeekToTime()</code></a> and
<a class="link" href="BMediaTrack.html#BMediaTrack_SeekToFrame" title="SeekToFrame(), SeekToTime()"><code class="methodname">SeekToFrame()</code></a>,
let you
look for the nearest key frame after or before the current position in
the file, without having to guess the time or frame number at which it's
located.</p></div></div></div><div id="footer"><hr /><div id="footerT">Prev: <a href="BMediaTheme.html">BMediaTheme</a>  Up: <a href="TheMediaKit.html">The Media Kit</a>  Next: <a href="BNullParameter.html">BNullParameter</a> </div><div id="footerB"><div id="footerBL"><a href="BMediaTheme.html" title="BMediaTheme"><img src="./images/navigation/prev.png" alt="Prev" /></a> <a href="TheMediaKit.html" title="The Media Kit"><img src="./images/navigation/up.png" alt="Up" /></a> <a href="BNullParameter.html" title="BNullParameter"><img src="./images/navigation/next.png" alt="Next" /></a></div><div id="footerBR"><div><a href="http://www.haiku-os.org"><img src="./images/People_24.png" alt="haiku-os.org" title="Visit The Haiku Website" /></a></div><div class="navighome" title="Home"><a accesskey="h" href="index.html"><img src="./images/navigation/home.png" alt="Home" /></a></div></div><div id="footerBC"><a href="http://www.access-company.com/home.html" title="ACCESS Co."><img alt="Access Company" src="./images/access_logo.png" /></a></div></div></div><div id="licenseFooter"><div id="licenseFooterBL"><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/" title="Creative Commons License"><img alt="Creative Commons License" style="border-width:0" src="https://licensebuttons.net/l/by-nc-nd/3.0/88x31.png" /></a></div><div id="licenseFooterBR"><a href="./LegalNotice.html">Legal Notice</a></div><div id="licenseFooterBC"><span id="licenseText">This work is licensed under a
          <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative
          Commons Attribution-Non commercial-No Derivative Works 3.0 License</a>.</span></div></div><!-- Fathom -->
<script>
(function(f, a, t, h, o, m){
	a[h]=a[h]||function(){
		(a[h].q=a[h].q||[]).push(arguments)
	};
	o=f.createElement('script'),
	m=f.getElementsByTagName('script')[0];
	o.async=1; o.src=t; o.id='fathom-script';
	m.parentNode.insertBefore(o,m)
})(document, window, 'https://metrics.haiku-os.org/tracker.js', 'fathom');
fathom('trackPageview');
</script>
<!-- / Fathom --></body></html>
