<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>The Be Book - Classes And Methods - The Midi Kit</title><link rel="stylesheet" href="be_book.css" type="text/css" media="all" /><link rel="shortcut icon" type="image/vnd.microsoft.icon" href="./images/favicon.ico" /><!--[if IE]>
    <link rel="stylesheet" type="text/css" href="be_book_ie.css" />
    <![endif]--><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><meta name="keywords" content="Access, BeOS, BeBook, API" /><link rel="start" href="index.html" title="The Be Book" /><link rel="up" href="TheMidiKit.html" title="The Midi Kit" /><link rel="prev" href="BMidiStore.html" title="BMidiStore" /><link rel="next" href="BMidiSynthFile.html" title="BMidiSynthFile" /></head><body><div id="header"><div id="headerT"><div id="headerTL"><a accesskey="p" href="BMidiStore.html" title="BMidiStore"><img src="./images/navigation/prev.png" alt="Prev" /></a> <a accesskey="u" href="TheMidiKit.html" title="The Midi Kit"><img src="./images/navigation/up.png" alt="Up" /></a> <a accesskey="n" href="BMidiSynthFile.html" title="BMidiSynthFile"><img src="./images/navigation/next.png" alt="Next" /></a></div><div id="headerTR"><div id="navigpeople"><a href="http://www.haiku-os.org"><img src="./images/People_24.png" alt="haiku-os.org" title="Visit The Haiku Website" /></a></div><div class="navighome" title="Home"><a accesskey="h" href="index.html"><img src="./images/navigation/home.png" alt="Home" /></a></div><div class="navigboxed" id="navigindex"><a accesskey="i" href="ClassIndex.html" title="Index">I</a></div><div class="navigboxed" id="naviglang" title="English">en</div></div><div id="headerTC">The Be Book - Classes And Methods - The Midi Kit</div></div><div id="headerB">Prev: <a href="BMidiStore.html">BMidiStore</a>  Up: <a href="TheMidiKit.html">The Midi Kit</a>  Next: <a href="BMidiSynthFile.html">BMidiSynthFile</a></div><hr /></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMidiSynth"></a>BMidiSynth</h2></div></div></div><a id="id1198578" class="indexterm"></a><div class="classheader"><table border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><table width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>Derived From:</td><td>–</td></tr><tr><td>Mix-in Classes:</td><td>–</td></tr><tr><td>Declared In:</td><td><code class="filename">midi/MidiSynth.h</code></td></tr><tr><td>Library:</td><td><code class="filename">libmidi.so</code></td></tr><tr><td>Allocation:</td><td>–</td></tr></tbody></table></td><td>
<a class="link overview" href="BMidiSynth_Overview.html" title="BMidiSynth">Class Overview</a>
<div class="toc"><ul><li><span class="section"><a href="BMidiSynth.html#BMidiSynth_ConstructorDestructor">Constructor and Destructor</a></span></li><li><span class="section"><a href="BMidiSynth.html#BMidiSynth_MemberFunctions">Member Functions</a></span></li></ul></div>
</td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMidiSynth_ConstructorDestructor"></a>Constructor and Destructor</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMidiSynth_Constructor"></a>BMidiSynth()</h4></div></div></div><code class="constructorsynopsis cpp"><span class="methodname">BMidiSynth</span>();</code><p>Creates a new <code class="classname">BMidiSynth</code> object. Also constructs a
<a class="link" href="BSynth.html" title="BSynth"><code class="classname">BSynth</code></a>
object and assigns the object to the app-wide
<code class="varname">be_synth</code> variable (if the object
doesn't already exist). To turn on your <code class="classname">BMidiSynth</code> object, you must call
<a class="link" href="BMidiSynth.html#BMidiSynth_EnableInput" title="EnableInput(), IsInputEnabled()"><code class="methodname">EnableInput()</code></a>
after construction.</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMidiSynth_Destructor"></a>~BMidiSynth()</h4></div></div></div><code class="destructorsynopsis cpp"><span class="modifier">virtual </span><span class="methodname">~BMidiSynth</span>();</code><p>Disconnects the object from the synthesizer, and destroys the object.</p></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMidiSynth_MemberFunctions"></a>Member Functions</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMidiSynth_EnableInput"></a><a id="BMidiSynth_IsInputEnabled"></a>
EnableInput(), IsInputEnabled()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">EnableInput</span>(<span class="methodparam"><span class="type">bool </span><span class="parameter">enable</span></span>,<br />                     <span class="methodparam"><span class="type">bool </span><span class="parameter">loadSynthFile</span></span>);</code><code class="methodsynopsis cpp"><span class="type">bool </span><span class="methodname">IsInputEnabled</span>() <span class="modifier">const</span>;</code><p><code class="methodname">EnableInput()</code> tells the object to
connect and disconnect itself to the synthesizer, as
<code class="parameter">enable</code> is <code class="constant">true</code> or
<code class="constant">false</code>. A disabled
<code class="classname">BMidiSynth</code> doesn't pass on any MIDI messages to
the synthesizer.</p><p>If <code class="parameter">enable</code> is
<code class="constant">true</code> and <code class="parameter">loadSynthFile</code>
is <code class="constant">true</code>, any instruments in the synth file (as
designated by <code class="varname">be_synth</code>) that haven't
already been loaded are
immediately loaded. Loading the entire synth file can take a long time
(more than a second, less than a minute), and this isn't your last shot
at loading instruments, so you may not want to load all at once. If you
want to defer loading, you can call
<a class="link" href="BMidiSynth.html#BMidiSynth_LoadInstrument" title="LoadInstrument(), RemapInstrument(), UnloadInstrument(), FlushInstrumentCache()"><code class="methodname">LoadInstrument()</code></a>
after calling <code class="methodname">EnableInput()</code>.</p><p><code class="methodname">IsInputEnabled()</code> tells you if the
<code class="classname">BMidiSynth</code> is currently enabled.</p><p>See
"<a class="xref" href="BMidiSynth_Overview.html#BMidiSynth_Overview_InitializingYourBMidiSynth" title="Initializing Your BMidiSynth">Initializing Your BMidiSynth</a>"
for more on instrument loading, instrument scope, and the use of Channel 10 percussion.</p><div class="admonition note"><div class="title">Note</div><div class="graphic"><img class="icon" alt="Note" width="32" src="./images/admonitions/Info_32.png" /><div class="text"><p><a class="link" href="BMidiSynthFile.html" title="BMidiSynthFile"><code class="classname">BMidiSynthFile</code></a>
objects do not have to call <code class="methodname">EnableInput()</code>. Input is
automatically enabled when the object loads a file.</p></div></div></div><p>Currently, <code class="methodname">EnableInput()</code> always returns
<code class="constant">B_OK</code>.</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMidiSynth_LoadInstrument"></a><a id="BMidiSynth_RemapInstrument"></a>
<a id="BMidiSynth_UnloadInstrument"></a>
<a id="BMidiSynth_FlushInstrumentCache"></a>
LoadInstrument(), RemapInstrument(), UnloadInstrument(),
FlushInstrumentCache()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">LoadInstrument</span>(<span class="methodparam"><span class="type">int16 </span><span class="parameter">instrument</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">RemapInstrument</span>(<span class="methodparam"><span class="type">int16 </span><span class="parameter">from</span></span>,<br />                         <span class="methodparam"><span class="type">int16 </span><span class="parameter">to</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">UnloadInstrument</span>(<span class="methodparam"><span class="type">int16 </span><span class="parameter">instrument</span></span>);</code><code class="methodsynopsis cpp"><span class="void">void </span><span class="methodname">FlushInstrumentCache</span>(<span class="methodparam"><span class="type">bool </span><span class="parameter">flush</span></span>);</code><div class="admonition warning"><div class="title">Warning</div><div class="graphic"><img class="icon" alt="Warning" width="32" src="./images/admonitions/Stop_32.png" /><div class="text"><p>These functions affect <span class="emphasis"><em>all</em></span> <code class="varname">be_synth</code>
clients (they should actually be part of the
<a class="link" href="BSynth.html" title="BSynth"><code class="classname">BSynth</code></a>
class).</p></div></div></div><p><code class="methodname">LoadInstrument()</code> loads the designated instrument from the synth file, if
it isn't loaded already. You have to load an instrument before you can
use it; if you've already loaded all instruments (through
<a class="link" href="BMidiSynth.html#BMidiSynth_IsInputEnabled"><code class="methodname">IsInputEnabled()</code></a>),
you won't have to call this function. A loaded
instrument is available to all <code class="classname">BMidiSynth</code> objects in your application.</p><p><code class="methodname">RemapInstrument()</code> tells the synthesizer
to replace all <code class="parameter">from</code> instrument
requests with <code class="parameter">to</code> requests. For example, here we tell the synthesizer to
play a gunshot whenever a banjo note is requested:</p><pre class="programlisting example cpp"><span class="comment">/* Banjo becomes gunshot. A good idea. */</span>
<code class="varname">midiSynth</code>.<code class="methodname">RemapInstrument</code>(<code class="constant">B_BANJO</code>, <code class="constant">B_GUNSHOT</code>);</pre><p><code class="methodname">UnloadInstrument()</code> removes the designated
instrument from the synthesizer.</p><p><code class="methodname">FlushInstrumentCache()</code> has a goofy
protocol. If <code class="parameter">flush</code> is <code class="constant">false</code>, the
synthesizer stops playing all current notes (and samples) and unloads all
loaded instruments. If <code class="parameter">flush</code> is <code class="constant">true</code>, the synthesizer's current output is
unaffected, but it's prevented from unloading any instruments in the
future. In other words,
<span class="code"><code class="methodname">FlushInstrumentCache</code>(<code class="constant">true</code>)</span>
tells the synthesizer to ignore all subsequent <code class="methodname">UnloadInstrument()</code> calls. The inability to
unload instruments holds until
<span class="code"><code class="methodname">FlushInstrumentCache</code>(<code class="constant">false</code>)</span>
is called.</p><div class="admonition note"><div class="title">Note</div><div class="graphic"><img class="icon" alt="Note" width="32" src="./images/admonitions/Info_32.png" /><div class="text"><p>See  "<a class="xref" href="BMidiSynth_Overview.html#BMidiSynth_Overview_InitializingYourBMidiSynth" title="Initializing Your BMidiSynth">Initializing Your BMidiSynth</a>"
for more on instrument loading, instrument scope, and the use of Channel 10 percussion.</p></div></div></div><p>Currently, <code class="methodname">UnloadInstrument()</code> always returns
<code class="constant">B_OK</code>.</p><p>The other two <span class="type">status_t</span> functions return…</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code></span></p></td><td><p>Instrument successfully loaded or remapped.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_BAD_INSTRUMENT</code></span></p></td><td><p>Illegal instrument specification.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_NO_MEMORY</code></span></p></td><td><p>Not enough memory to load instrument.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMidiSynth_MuteChannel"></a><a id="BMidiSynth_GetMuteMap"></a>
<a id="BMidiSynth_SoloChannel"></a>
<a id="BMidiSynth_GetSoloMap"></a>
MuteChannel(), GetMuteMap(), SoloChannel(), GetSoloMap()</h4></div></div></div><div class="admonition warning"><div class="title">Warning</div><div class="graphic"><img class="icon" alt="Warning" width="32" src="./images/admonitions/Stop_32.png" /><div class="text"><p>These functions are broken; don't use them.</p></div></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMidiSynth_SetTransposition"></a><a id="BMidiSynth_Transposition"></a>
SetTransposition(), Transposition()</h4></div></div></div><code class="methodsynopsis cpp"><span class="void">void </span><span class="methodname">SetTransposition</span>(<span class="methodparam"><span class="type">int16 </span><span class="parameter">transpose</span></span>);</code><code class="methodsynopsis cpp"><span class="type">int16 </span><span class="methodname">SetTransposition</span>() <span class="modifier">const</span>;</code><p><code class="methodname">SetTransposition()</code> sets the amount, in halfsteps, by which subsequently
generated notes will be transposed (shifted in pitch). Notes that are
already sounding are not transposed. The transposition affects all
channels of the invoked-upon object.</p><p><code class="methodname">Transposition()</code> returns the current transposition amount (in halfsteps);
the default is 0.</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMidiSynth_SetVolume"></a><a id="BMidiSynth_Volume"></a>
SetVolume(), Volume()</h4></div></div></div><code class="methodsynopsis cpp"><span class="void">void </span><span class="methodname">SetVolume</span>(<span class="methodparam"><span class="type">double </span><span class="parameter">volume</span></span>);</code><code class="methodsynopsis cpp"><span class="type">double </span><span class="methodname">Volume</span>() <span class="modifier">const</span>;</code><p><code class="methodname">SetVolume()</code> scales the object's
amplitude (on all channels) by volume. In addition to affecting
subsequently-generated notes, the new volume scale affects notes that are
currently being generated by this object.</p><p><code class="methodname">Volume()</code> returns the current amplitude
scalar value; the default is 1.0.</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMidiSynth_Tick"></a>Tick()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">uint32 </span><span class="methodname">Tick</span>() <span class="modifier">const</span>;</code><p>Returns the number of microseconds since the object was created. You
should use this measurement for relative values only (for measuring the
time between notes, for example). Also, note that the time argument to
the MIDI hook functions measures time in milliseconds.</p></div></div></div><div id="footer"><hr /><div id="footerT">Prev: <a href="BMidiStore.html">BMidiStore</a>  Up: <a href="TheMidiKit.html">The Midi Kit</a>  Next: <a href="BMidiSynthFile.html">BMidiSynthFile</a> </div><div id="footerB"><div id="footerBL"><a href="BMidiStore.html" title="BMidiStore"><img src="./images/navigation/prev.png" alt="Prev" /></a> <a href="TheMidiKit.html" title="The Midi Kit"><img src="./images/navigation/up.png" alt="Up" /></a> <a href="BMidiSynthFile.html" title="BMidiSynthFile"><img src="./images/navigation/next.png" alt="Next" /></a></div><div id="footerBR"><div><a href="http://www.haiku-os.org"><img src="./images/People_24.png" alt="haiku-os.org" title="Visit The Haiku Website" /></a></div><div class="navighome" title="Home"><a accesskey="h" href="index.html"><img src="./images/navigation/home.png" alt="Home" /></a></div></div><div id="footerBC"><a href="http://www.access-company.com/home.html" title="ACCESS Co."><img alt="Access Company" src="./images/access_logo.png" /></a></div></div></div><div id="licenseFooter"><div id="licenseFooterBL"><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/" title="Creative Commons License"><img alt="Creative Commons License" style="border-width:0" src="https://licensebuttons.net/l/by-nc-nd/3.0/88x31.png" /></a></div><div id="licenseFooterBR"><a href="./LegalNotice.html">Legal Notice</a></div><div id="licenseFooterBC"><span id="licenseText">This work is licensed under a
          <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative
          Commons Attribution-Non commercial-No Derivative Works 3.0 License</a>.</span></div></div><!-- Fathom -->
<script>
(function(f, a, t, h, o, m){
	a[h]=a[h]||function(){
		(a[h].q=a[h].q||[]).push(arguments)
	};
	o=f.createElement('script'),
	m=f.getElementsByTagName('script')[0];
	o.async=1; o.src=t; o.id='fathom-script';
	m.parentNode.insertBefore(o,m)
})(document, window, 'https://metrics.haiku-os.org/tracker.js', 'fathom');
fathom('trackPageview');
</script>
<!-- / Fathom --></body></html>
