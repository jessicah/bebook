<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>The Be Book - Classes And Methods - The Storage Kit</title><link rel="stylesheet" href="be_book.css" type="text/css" media="all" /><link rel="shortcut icon" type="image/vnd.microsoft.icon" href="./images/favicon.ico" /><!--[if IE]>
    <link rel="stylesheet" type="text/css" href="be_book_ie.css" />
    <![endif]--><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><meta name="keywords" content="Access, BeOS, BeBook, API" /><link rel="start" href="index.html" title="The Be Book" /><link rel="up" href="TheStorageKit.html" title="The Storage Kit" /><link rel="prev" href="BPath.html" title="BPath" /><link rel="next" href="BRefFilter.html" title="BRefFilter" /></head><body><div id="header"><div id="headerT"><div id="headerTL"><a accesskey="p" href="BPath.html" title="BPath"><img src="./images/navigation/prev.png" alt="Prev" /></a> <a accesskey="u" href="TheStorageKit.html" title="The Storage Kit"><img src="./images/navigation/up.png" alt="Up" /></a> <a accesskey="n" href="BRefFilter.html" title="BRefFilter"><img src="./images/navigation/next.png" alt="Next" /></a></div><div id="headerTR"><div id="navigpeople"><a href="http://www.haiku-os.org"><img src="./images/People_24.png" alt="haiku-os.org" title="Visit The Haiku Website" /></a></div><div class="navighome" title="Home"><a accesskey="h" href="index.html"><img src="./images/navigation/home.png" alt="Home" /></a></div><div class="navigboxed" id="navigindex"><a accesskey="i" href="ClassIndex.html" title="Index">I</a></div><div class="navigboxed" id="naviglang" title="English">en</div></div><div id="headerTC">The Be Book - Classes And Methods - The Storage Kit</div></div><div id="headerB">Prev: <a href="BPath.html">BPath</a>  Up: <a href="TheStorageKit.html">The Storage Kit</a>  Next: <a href="BRefFilter.html">BRefFilter</a></div><hr /></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BQuery"></a>BQuery</h2></div></div></div><a id="id1247444" class="indexterm"></a><div class="classheader"><table border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><table width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>Derived From:</td><td>None</td></tr><tr><td>Mix-in Classes:</td><td>None</td></tr><tr><td>Declared In:</td><td><code class="filename">storage/NodeInfo.h</code></td></tr><tr><td>Library:</td><td><code class="filename">libbe.so</code></td></tr><tr><td>Allocation:</td><td>–</td></tr></tbody></table></td><td>
<a class="link overview" href="BQuery_Overview.html" title="BQuery">Class Overview</a>
<div class="toc"><ul><li><span class="section"><a href="BQuery.html#BQuery_ConstructorDestructor">Constructor and Destructor</a></span></li><li><span class="section"><a href="BQuery.html#BQuery_Member_Functions">Member Functions</a></span></li><li><span class="section"><a href="BQuery.html#BQuery_Constants">Constants</a></span></li></ul></div>
</td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BQuery_ConstructorDestructor"></a>Constructor and Destructor</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BQuery_Constructor"></a>BQuery()</h4></div></div></div><code class="constructorsynopsis cpp"><span class="methodname">BQuery</span>();</code><p>Creates a new <code class="classname">BQuery</code> object. To use the object, you have to set its
predicate and volume, and then tell it to
<a class="link" href="BQuery.html#BQuery_Fetch" title="Fetch()"><code class="methodname">Fetch()</code></a>.
If you want to fetch again, you have to call
<a class="link" href="BQuery.html#BQuery_Clear" title="Clear()"><code class="methodname">Clear()</code></a>
first (and re-set the predicate and volume.)</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BQuery_Destructor"></a>~BQuery()</h4></div></div></div><code class="destructorsynopsis cpp"><span class="methodname">~BQuery</span>();</code><p>Destroys the <code class="classname">BQuery</code>. If the query is live, the query is shot dead. You
stop receiving live query updates when you delete the <code class="classname">BQuery</code> object.</p></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BQuery_Member_Functions"></a>Member Functions</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BQuery_Clear"></a>Clear()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">Clear</span>();</code><p>Erases the <code class="classname">BQuery</code>'s predicate, sets the volume and target to <code class="constant">NULL</code>, and
turns off live query updates (if the query is live). You call <code class="methodname">Clear()</code> if
you want to <a class="link" href="BQuery.html#BQuery_Fetch" title="Fetch()"><code class="methodname">Fetch()</code></a>
more than once: You have to <code class="methodname">Clear()</code> before each
<a class="link" href="BQuery.html#BQuery_Fetch" title="Fetch()"><code class="methodname">Fetch()</code></a> (except the first).</p><p><code class="methodname">Clear()</code> always return <code class="constant">B_OK</code>.</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BQuery_CountEntries"></a><a id="BQuery_Rewind"></a>
CountEntries(), Rewind()</h4></div></div></div><div class="admonition warning"><div class="title">Warning</div><div class="graphic"><img class="icon" alt="Warning" width="32" src="./images/admonitions/Stop_32.png" /><div class="text"><p>Don't use these functions. They're no-ops for the <code class="classname">BQuery</code> class.</p></div></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BQuery_Fetch"></a>Fetch()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">Fetch</span>();</code><p>Tells the <code class="classname">BQuery</code> to go fetch the entries that satisfy the predicate.
After you've fetched, you can retrieve the set of "static" entries
through calls to
<a class="link" href="BQuery.html#BQuery_GetNextEntry" title="GetNextEntry(), GetNextRef(), GetNextDirents()"><code class="methodname">GetNextEntry()</code></a>,
<a class="link" href="BQuery.html#BQuery_GetNextRef"><code class="methodname">GetNextRef()</code></a>, or
<a class="link" href="BQuery.html#BQuery_GetNextDirents"><code class="methodname">GetNextDirents()</code></a>.</p><p>If you've set the <code class="classname">BQuery</code>'s target, then this query is live. The live
query update messages start rolling in when you tell the object to
<code class="methodname">Fetch()</code>. They stop when you
<a class="link" href="BQuery.html#BQuery_Clear" title="Clear()"><code class="methodname">Clear()</code></a>
or destroy the object.</p><p>The fetch fails if the object's predicate or volume isn't set, or if
you've already fetched but haven'
<a class="link" href="BQuery.html#BQuery_Clear" title="Clear()"><code class="methodname">Clear()</code></a>'d since then.</p><div class="admonition warning"><div class="title">Warning</div><div class="graphic"><img class="icon" alt="Warning" width="32" src="./images/admonitions/Stop_32.png" /><div class="text"><p>Every query must include at least one indexed attribute. If your
predicate includes no indexed attributes, <code class="methodname">Fetch()</code> will not balk—it
returns <code class="constant">B_OK</code> (given that it doesn't otherwise fail). However, no entries
will have been retrieved, and your subsequent <code class="methodname">GetNext…()</code> call will fail
(<code class="constant">B_BAD_VALUE</code>).</p></div></div></div><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code>.</span></p></td><td><p>The fetch is running.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_NO_INIT</code>.</span></p></td><td><p>The volume or predicate isn't set.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_BAD_VALUE</code>.</span></p></td><td><p>The predicate is improper.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_NOT_ALLOWED</code>.</span></p></td><td><p>You've already fetched;
<a class="link" href="BQuery.html#BQuery_Clear" title="Clear()"><code class="methodname">Clear()</code></a>
the object and start again.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BQuery_GetNextEntry"></a><a id="BQuery_GetNextRef"></a>
<a id="BQuery_GetNextDirents"></a>
GetNextEntry(), GetNextRef(), GetNextDirents()</h4></div></div></div><code class="methodsynopsis cpp"><span class="modifier">virtual </span><span class="type">status_t </span><span class="methodname">GetNextEntry</span>(<span class="methodparam"><span class="type"><a class="link" href="BEntry.html" title="BEntry"><code class="classname">BEntry</code></a>* </span><span class="parameter">entry</span></span>,<br />                              <span class="methodparam"><span class="type">bool </span><span class="parameter">traverse</span><span class="initializer"> = <span class="constant">false</span></span></span>);</code><code class="methodsynopsis cpp"><span class="modifier">virtual </span><span class="type">status_t </span><span class="methodname">GetNextRef</span>(<span class="methodparam"><span class="type">entry_ref* </span><span class="parameter">ref</span></span>);</code><code class="methodsynopsis cpp"><span class="modifier">virtual </span><span class="type">int32 </span><span class="methodname">GetNextDirents</span>(<span class="methodparam"><span class="type">dirent* </span><span class="parameter">buf</span></span>,<br />                             <span class="methodparam"><span class="type">size_t </span><span class="parameter">bufsize</span></span>,<br />                             <span class="methodparam"><span class="type">int32 </span><span class="parameter">count</span><span class="initializer"> = <span class="constant">INT_MAX</span></span></span>);</code><p>These functions return the next entry in the "static" entry list; the
list is created when you tell your (well-formed) <code class="classname">BQuery</code> to
<a class="link" href="BQuery.html#BQuery_Fetch" title="Fetch()"><code class="methodname">Fetch()</code></a>. You
can retrieve the entry as a
<a class="link" href="BEntry.html" title="BEntry"><code class="classname">BEntry</code></a>, <span class="type">entry_ref</span>, or <span class="type">dirent</span> structure. The
static entry list is the set of entries that initially satisfy the
predicate; entries found by the live query mechanism are not included in
this list.</p><p>When you reach the end of the entry list, the <code class="methodname">Get…()</code> function returns
an indicative value:</p><ul class="itemizedlist"><li><p><code class="methodname">GetNextRef()</code> and <code class="methodname">GetNextEntry()</code>
return <code class="constant">B_ENTRY_NOT_FOUND</code>.</p></li><li><p><code class="methodname">GetNextDirents()</code> returns 0.</p></li></ul><p>You can only cycle over the list once; the
<a class="link" href="BQuery.html#BQuery_Rewind"><code class="methodname">Rewind()</code></a> function is not
defined for <code class="classname">BQuery</code>. See the
<a class="link" href="BEntryList.html" title="BEntryList"><code class="classname">BEntryList</code></a>
class for more information on these functions.</p><p><code class="methodname">GetNextDirents()</code> returns the number of dirents it retrieved (currently,
it can only retrieve one at a time. The other two functions return these
codes:</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code>.</span></p></td><td><p>The entry was retrieved.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_ENTRY_NOT_FOUND</code>.</span></p></td><td><p>You're at the end of the list.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_BAD_VALUE</code>.</span></p></td><td><p>The predicate includes unindexed attributes.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_FILE_ERROR</code>.</span></p></td><td><p>The <code class="classname">BQuery</code> hasn't fetched.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BQuery_PushAttr"></a><a id="BQuery_query_op"></a>
<a id="BQuery_PushString"></a>
<a id="BQuery_PushDouble"></a>
<a id="BQuery_PushFloat"></a>
<a id="BQuery_PushInt64"></a>
<a id="BQuery_PushUInt64"></a>
<a id="BQuery_PushInt32"></a>
<a id="BQuery_PushUInt32"></a>
<a id="BQuery_PushOp"></a>
PushAttr() , PushOp(), PushUInt32(), PushInt32(), PushUInt64(),
PushInt64(), PushFloat(), PushDouble(), PushString(), query_op</h4></div></div></div><code class="methodsynopsis cpp"><span class="void">void </span><span class="methodname">PushAttr</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">attr_name</span></span>);</code><code class="methodsynopsis cpp"><span class="void">void </span><span class="methodname">PushOp</span>(<span class="methodparam"><span class="type">query_op </span><span class="parameter">operator</span></span>);</code><code class="methodsynopsis cpp"><span class="void">void </span><span class="methodname">PushUInt32</span>(<span class="methodparam"><span class="type">uint32 </span><span class="parameter">value</span></span>);</code><code class="methodsynopsis cpp"><span class="void">void </span><span class="methodname">PushInt32</span>(<span class="methodparam"><span class="type">int32 </span><span class="parameter">value</span></span>);</code><code class="methodsynopsis cpp"><span class="void">void </span><span class="methodname">PushUInt64</span>(<span class="methodparam"><span class="type">uint64 </span><span class="parameter">value</span></span>);</code><code class="methodsynopsis cpp"><span class="void">void </span><span class="methodname">PushInt64</span>(<span class="methodparam"><span class="type">int64 </span><span class="parameter">value</span></span>);</code><code class="methodsynopsis cpp"><span class="void">void </span><span class="methodname">PushFloat</span>(<span class="methodparam"><span class="type">float </span><span class="parameter">value</span></span>);</code><code class="methodsynopsis cpp"><span class="void">void </span><span class="methodname">PushDouble</span>(<span class="methodparam"><span class="type">double </span><span class="parameter">value</span></span>);</code><code class="methodsynopsis cpp"><span class="void">void </span><span class="methodname">PushString</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">attr_name</span></span>,<br />                <span class="methodparam"><span class="type">bool </span><span class="parameter">case_insensitive</span><span class="initializer"> = <span class="constant">false</span></span></span>);</code><p>You use these functions to construct the <code class="classname">BQuery</code>'s predicate. They create
a predicate expression by pushing attribute names, operators, and values
in Reverse Polish Notation (post-fix) order.</p><ul class="itemizedlist"><li><p><code class="methodname">PushAttr()</code> pushes an attribute name.</p></li><li><p><code class="methodname">PushOp()</code> pushes one of the
<a class="link" href="BQuery.html#query_op" title="Query Operation Codes"><span class="type">query_op</span></a> operators.</p></li><li><p>The rest of the functions push values of the designated types.</p></li></ul><p>For details on how the push method works, see
"<a class="xref" href="BQuery_Overview.html#BQuery_Constructing_A_Predicate" title="Constructing a Predicate">Constructing a Predicate</a>."</p><p>The predicate that you construct through these functions can be returned
as a string through the
<a class="link" href="BQuery.html#BQuery_GetPredicate"><code class="methodname">GetPredicate()</code></a> function.</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BQuery_SetTarget"></a><a id="BQuery_IsLive"></a>
SetTarget(), IsLive()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">SetTarget</span>(<span class="methodparam"><span class="type"><a class="link" href="BMessenger.html" title="BMessenger"><code class="classname">BMessenger</code></a> </span><span class="parameter">target</span></span>);</code><code class="methodsynopsis cpp"><span class="type">bool </span><span class="methodname">IsLive</span>() <span class="modifier">const</span>;</code><p>Sets the <code class="classname">BQuery</code>'s target. The target identifies the
<a class="link" href="BLooper.html" title="BLooper"><code class="classname">BLooper</code></a>/<a class="link" href="BHandler.html" title="BHandler"><code class="classname">BHandler</code></a> pair
(a la the <a class="link" href="BInvoker.html" title="BInvoker"><code class="classname">BInvoker</code></a>
target protocol) that will receive subsequent live
query update messages. Calling this function declares the query to be
live.</p><p>If <code class="parameter">target</code> is <code class="constant">NULL</code>, the
<code class="classname">BQuery</code> is told to be "not live". However, you can
only turn off liveness (in this way) before you
<a class="link" href="BQuery.html#BQuery_Fetch" title="Fetch()"><code class="methodname">Fetch()</code></a>. In other words,
if you set the target, and then call
<a class="link" href="BQuery.html#BQuery_Fetch" title="Fetch()"><code class="methodname">Fetch()</code></a> and then call
<span class="code"><code class="methodname">SetTarget</code>(<code class="constant">NULL</code>)</span>, the
<code class="classname">BQuery</code> will think that it (itself) is not live, but
it really is.</p><p><code class="methodname">IsLive()</code> tells you if the <code class="classname">BQuery</code>
is live. The "liveness" needn't be
actuated yet—live queries don't start operating until you tell the
<code class="classname">BQuery</code> to
<a class="link" href="BQuery.html#BQuery_Fetch" title="Fetch()"><code class="methodname">Fetch()</code></a>.
The live query is killed when you delete or
<a class="link" href="BQuery.html#BQuery_Clear" title="Clear()"><code class="methodname">Clear()</code></a>
the <code class="classname">BQuery</code> object.</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code>.</span></p></td><td><p>The <code class="parameter">target</code>
was set (including set to <code class="constant">NULL</code>).</p></td></tr><tr><td><p><span class="term"><code class="constant">B_BAD_VALUE</code>.</span></p></td><td><p><code class="parameter">target</code> doesn't identify a proper looper/handler pair.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_NOT_ALLOWED</code>.</span></p></td><td><p>You've already
<a class="link" href="BQuery.html#BQuery_Fetch" title="Fetch()"><code class="methodname">Fetch()</code></a>'d; you need to
<a class="link" href="BQuery.html#BQuery_Clear" title="Clear()"><code class="methodname">Clear()</code></a>.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BQuery_SetPredicate"></a><a id="BQuery_PredicateLength"></a>
<a id="BQuery_GetPredicate"></a>
SetPredicate(), GetPredicate(), PredicateLength()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">SetPredicate</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">expr</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">GetPredicate</span>(<span class="methodparam"><span class="type">char* </span><span class="parameter">buf</span></span>,<br />                      <span class="methodparam"><span class="type">size_t </span><span class="parameter">length</span></span>);</code><code class="methodsynopsis cpp"><span class="type">size_t </span><span class="methodname">PredicateLength</span>();</code><p><code class="methodname">SetPredicate()</code> sets the <code class="classname">BQuery</code>'s
predicate as a string. Predicate strings can be simple, single comparison expressions:</p><pre class="screen">"name = fido"</pre><p>Or they can be more complex:</p><pre class="screen">"((name = fid*) || (size &gt; 500)) &amp;&amp; (last_modified &lt; 243567)"</pre><p>For the complete rules on setting the predicate as a string, see
"<a class="xref" href="BQuery_Overview.html#BQuery_Constructing_A_Predicate" title="Constructing a Predicate">Constructing a Predicate</a>."</p><p>You can also set the predicate through the <code class="methodname">Push…()</code> functions. You can't
combine the methods: Pushing the predicate always takes precedence over
<code class="methodname">SetPredicate()</code>, regardless of the order in which the methods are deployed.</p><p><code class="methodname">GetPredicate()</code> copies the predicate into
<code class="parameter">buf</code>; <code class="parameter">length</code> gives the length of
<code class="parameter">buf</code>, in bytes. If you want to find out how much storage you need to
allocate to accommodate the predicate, call <code class="methodname">PredicateLength()</code> first.</p><p>If you set the predicate through the <code class="methodname">Push…()</code> functions,
<code class="methodname">GetPredicate()</code>
converts the pushed construction into a string, and returns a copy of the
string to you.</p><p><code class="methodname">PredicateLength()</code> returns the length of the predicate string, regardless
of how it's created.</p><div class="admonition warning"><div class="title">Warning</div><div class="graphic"><img class="icon" alt="Warning" width="32" src="./images/admonitions/Stop_32.png" /><div class="text"><p><code class="methodname">GetPredicate()</code> and <code class="methodname">PredicateLength()</code> both clear the push stack. This is
important, because it means that you can't build up a portion of your
predicate, then call <code class="methodname">GetPredicate()</code>, build a little more, look again,
build some more, etc. When you call <code class="methodname">GetPredicate()</code>, you're done. Your
next step should be a
<a class="link" href="BQuery.html#BQuery_Fetch" title="Fetch()"><code class="methodname">Fetch()</code></a></p></div></div></div><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code>.</span></p></td><td><p>The predicate was successfully set or gotten.
</p></td></tr><tr><td><p><span class="term"><code class="constant">B_NO_INIT</code>.</span></p></td><td><p>(<code class="methodname">Get</code>) The predicate isn't set.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_BAD_VALUE</code>.</span></p></td><td><p>(<code class="methodname">Get</code>)
length is shorter than the predicate's length.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_NOT_ALLOWED</code>.</span></p></td><td><p> (<code class="methodname">Set</code>)
You've already
<a class="link" href="BQuery.html#BQuery_Fetch" title="Fetch()"><code class="methodname">Fetch()</code></a>'d;
you have to
<a class="link" href="BQuery.html#BQuery_Clear" title="Clear()"><code class="methodname">Clear()</code></a>.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_NO_MEMORY</code>.</span></p></td><td><p>(<code class="methodname">Set</code>) Not enough memory to store the predicate string.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BQuery_SetVolume"></a>SetVolume()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">SetVolume</span>(<span class="methodparam"><span class="modifier">const </span><span class="type"><a class="link" href="BVolume.html" title="BVolume"><code class="classname">BVolume</code></a>* </span><span class="parameter">volume</span></span>);</code><p>A query can only look in one volume at a time. This is where you set the
volume that you want to look at.</p><div class="admonition warning"><div class="title">Warning</div><div class="graphic"><img class="icon" alt="Warning" width="32" src="./images/admonitions/Stop_32.png" /><div class="text"><p>Currently, <code class="methodname">SetVolume()</code> doesn't complain if volume is invalid. However,
the subsequent
<a class="link" href="BQuery.html#BQuery_Fetch" title="Fetch()"><code class="methodname">Fetch()</code></a>
will fail (<code class="constant">B_NO_INIT</code>).</p></div></div></div><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code>.</span></p></td><td><p>The volume was set.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_NOT_ALLOWED</code>.</span></p></td><td><p>You've already fetched, you need to
<a class="link" href="BQuery.html#BQuery_Clear" title="Clear()"><code class="methodname">Clear()</code></a>
before you can reset the volume.</p></td></tr></tbody></table></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BQuery_Constants"></a>Constants</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="query_op"></a><a id="B_EQ"></a>
<a id="B_NE"></a>
<a id="B_GT"></a>
<a id="B_LT"></a>
<a id="B_GE"></a>
<a id="B_LE"></a>
<a id="B_CONTAINS"></a>
<a id="B_BEGINS_WITH"></a>
<a id="B_ENDS_WITH"></a>
<a id="B_AND"></a>
<a id="B_OR"></a>
<a id="B_NOT"></a>
Query Operation Codes</h4></div></div></div><a id="id1249435" class="indexterm"></a><a id="id1249442" class="indexterm"></a><a id="id1249451" class="indexterm"></a><a id="id1249460" class="indexterm"></a><a id="id1249469" class="indexterm"></a><a id="id1249478" class="indexterm"></a><a id="id1249487" class="indexterm"></a><a id="id1249496" class="indexterm"></a><a id="id1249505" class="indexterm"></a><a id="id1249514" class="indexterm"></a><a id="id1249524" class="indexterm"></a><a id="id1249533" class="indexterm"></a><a id="id1249542" class="indexterm"></a><p>These constants define the operations that can be used to specify a
query. They are used in conjunction with the push functions for
constructing a query.</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Constant</th><th>Operation</th></tr></thead><tbody><tr><td><code class="constant">B_EQ</code></td><td>=</td></tr><tr><td><code class="constant">B_NE</code></td><td>!=</td></tr><tr><td><code class="constant">B_GT</code></td><td>&gt;</td></tr><tr><td><code class="constant">B_LT</code></td><td>&lt;</td></tr><tr><td><code class="constant">B_GE</code></td><td>&gt;=</td></tr><tr><td><code class="constant">B_LE</code></td><td>&lt;=</td></tr><tr><td><code class="constant">B_CONTAINS</code></td><td>string contains value ("*value*")</td></tr><tr><td><code class="constant">B_BEGINS_WITH</code></td><td>string begins with value ("value*")</td></tr><tr><td><code class="constant">B_ENDS_WITH</code></td><td>string ends with value ("*value")</td></tr><tr><td><code class="constant">B_AND</code></td><td>&amp;&amp;</td></tr><tr><td><code class="constant">B_OR</code></td><td>||</td></tr><tr><td><code class="constant">B_NOT</code></td><td>!</td></tr></tbody></table></div></div></div></div><div id="footer"><hr /><div id="footerT">Prev: <a href="BPath.html">BPath</a>  Up: <a href="TheStorageKit.html">The Storage Kit</a>  Next: <a href="BRefFilter.html">BRefFilter</a> </div><div id="footerB"><div id="footerBL"><a href="BPath.html" title="BPath"><img src="./images/navigation/prev.png" alt="Prev" /></a> <a href="TheStorageKit.html" title="The Storage Kit"><img src="./images/navigation/up.png" alt="Up" /></a> <a href="BRefFilter.html" title="BRefFilter"><img src="./images/navigation/next.png" alt="Next" /></a></div><div id="footerBR"><div><a href="http://www.haiku-os.org"><img src="./images/People_24.png" alt="haiku-os.org" title="Visit The Haiku Website" /></a></div><div class="navighome" title="Home"><a accesskey="h" href="index.html"><img src="./images/navigation/home.png" alt="Home" /></a></div></div><div id="footerBC"><a href="http://www.access-company.com/home.html" title="ACCESS Co."><img alt="Access Company" src="./images/access_logo.png" /></a></div></div></div><div id="licenseFooter"><div id="licenseFooterBL"><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/" title="Creative Commons License"><img alt="Creative Commons License" style="border-width:0" src="https://licensebuttons.net/l/by-nc-nd/3.0/88x31.png" /></a></div><div id="licenseFooterBR"><a href="./LegalNotice.html">Legal Notice</a></div><div id="licenseFooterBC"><span id="licenseText">This work is licensed under a
          <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative
          Commons Attribution-Non commercial-No Derivative Works 3.0 License</a>.</span></div></div><!-- Fathom -->
<script>
(function(f, a, t, h, o, m){
	a[h]=a[h]||function(){
		(a[h].q=a[h].q||[]).push(arguments)
	};
	o=f.createElement('script'),
	m=f.getElementsByTagName('script')[0];
	o.async=1; o.src=t; o.id='fathom-script';
	m.parentNode.insertBefore(o,m)
})(document, window, 'https://metrics.haiku-os.org/tracker.js', 'fathom');
fathom('trackPageview');
</script>
<!-- / Fathom --></body></html>
