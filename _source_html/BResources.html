<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>The Be Book - Classes And Methods - The Storage Kit</title><link rel="stylesheet" href="be_book.css" type="text/css" media="all" /><link rel="shortcut icon" type="image/vnd.microsoft.icon" href="./images/favicon.ico" /><!--[if IE]>
    <link rel="stylesheet" type="text/css" href="be_book_ie.css" />
    <![endif]--><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><meta name="keywords" content="Access, BeOS, BeBook, API" /><link rel="start" href="index.html" title="The Be Book" /><link rel="up" href="TheStorageKit.html" title="The Storage Kit" /><link rel="prev" href="BRefFilter.html" title="BRefFilter" /><link rel="next" href="BStatable.html" title="BStatable" /></head><body><div id="header"><div id="headerT"><div id="headerTL"><a accesskey="p" href="BRefFilter.html" title="BRefFilter"><img src="./images/navigation/prev.png" alt="Prev" /></a> <a accesskey="u" href="TheStorageKit.html" title="The Storage Kit"><img src="./images/navigation/up.png" alt="Up" /></a> <a accesskey="n" href="BStatable.html" title="BStatable"><img src="./images/navigation/next.png" alt="Next" /></a></div><div id="headerTR"><div id="navigpeople"><a href="http://www.haiku-os.org"><img src="./images/People_24.png" alt="haiku-os.org" title="Visit The Haiku Website" /></a></div><div class="navighome" title="Home"><a accesskey="h" href="index.html"><img src="./images/navigation/home.png" alt="Home" /></a></div><div class="navigboxed" id="navigindex"><a accesskey="i" href="ClassIndex.html" title="Index">I</a></div><div class="navigboxed" id="naviglang" title="English">en</div></div><div id="headerTC">The Be Book - Classes And Methods - The Storage Kit</div></div><div id="headerB">Prev: <a href="BRefFilter.html">BRefFilter</a>  Up: <a href="TheStorageKit.html">The Storage Kit</a>  Next: <a href="BStatable.html">BStatable</a></div><hr /></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BResources"></a>BResources</h2></div></div></div><a id="id1250195" class="indexterm"></a><div class="classheader"><table border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><table width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>Derived From:</td><td>None</td></tr><tr><td>Mix-in Classes:</td><td>None</td></tr><tr><td>Declared In:</td><td><code class="filename">storage/Resources.h</code></td></tr><tr><td>Library:</td><td><code class="filename">libbe.so</code></td></tr><tr><td>Allocation:</td><td>–</td></tr></tbody></table></td><td>
<a class="link overview" href="BResources_Overview.html" title="BResources">Class Overview</a>
<div class="toc"><ul><li><span class="section"><a href="BResources.html#BResources_ConstructorDestructor">Constructor and Destructor</a></span></li><li><span class="section"><a href="BResources.html#BResources_Member_Functions">Member Functions</a></span></li></ul></div>
</td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BResources_ConstructorDestructor"></a>Constructor and Destructor</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BResources_Constructor"></a>BResources()</h4></div></div></div><code class="constructorsynopsis cpp"><span class="methodname">BResources</span>();</code><code class="constructorsynopsis cpp"><span class="methodname">BResources</span>(<span class="methodparam"><span class="type"><a class="link" href="BFile.html" title="BFile"><code class="classname">BFile</code></a>* </span><span class="parameter">file</span></span>,<br />           <span class="methodparam"><span class="type">bool </span><span class="parameter">clobber</span><span class="initializer"> = <span class="constant">false</span></span></span>);</code><p>
Creates a new <code class="classname">BResources</code> object. You can initialize the object by passing
a pointer to a valid
<a class="link" href="BFile.html" title="BFile"><code class="classname">BFile</code></a>; without the argument, the object won't refer
to a file until
<a class="link" href="BResources.html#BResources_SetTo" title="SetTo()"><code class="methodname">SetTo()</code></a> is called.
</p><p>
If <code class="parameter">clobber</code> is <code class="constant">true</code>, the file
that's referred to by <a class="link" href="BFile.html" title="BFile"><code class="classname">BFile</code></a> is truncated
(it's data is erased), and a new resource file header is written to the
file. If <code class="parameter">clobber</code> is <code class="constant">false</code> and the file doesn't otherwise doesn't have a
resource header, the initialization fails.
</p><p>
<code class="classname">BResources</code> copies the
<a class="link" href="BFile.html" title="BFile"><code class="classname">BFile</code></a>
argument; after the constructor returns, you
can, for example, delete the
<a class="link" href="BFile.html" title="BFile"><code class="classname">BFile</code></a>
that you passed in.
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BResources_Destructor"></a>~BResources()</h4></div></div></div><code class="destructorsynopsis cpp"><span class="modifier">virtual </span><span class="methodname">~BResources</span>();</code><p>
Destroys the BResources object.
</p></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BResources_Member_Functions"></a>Member Functions</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BResources_AddResource"></a>AddResource()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddResource</span>(<span class="methodparam"><span class="type">type_code </span><span class="parameter">type</span></span>,<br />                     <span class="methodparam"><span class="type">int32 </span><span class="parameter">id</span></span>,<br />                     <span class="methodparam"><span class="modifier">const </span><span class="type">void* </span><span class="parameter">data</span></span>,<br />                     <span class="methodparam"><span class="type">size_t </span><span class="parameter">length</span></span>,<br />                     <span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span><span class="initializer"> = <span class="constant">NULL</span></span></span>);</code><p>
Adds a new resource to the file. For this function to have an effect, the
file must be open for writing. The arguments are:
</p><ul class="itemizedlist"><li><p>
<code class="parameter">type</code> is one of the <span class="type">type_code</span> constants defined in
<code class="filename">support/TypeConstants.h</code>.
</p></li><li><p>
<code class="parameter">id</code> is the ID number that you want to assign to the resource. The
value of the ID has no meaning other than that which your application
gives it; the only restriction on the ID is that the combination of it
and the data type constant must be unique across all resources in this
resource file.
</p></li><li><p>
<code class="parameter">data</code> is a pointer to the data that you want the resource to hold.
</p></li><li><p>
<code class="parameter">length</code> is the length of the data buffer, in bytes.
</p></li><li><p>
<code class="parameter">name</code> is optional, and needn't be unique. Or even interesting.
</p></li></ul><p>
Ownership of the data pointer isn't assigned to the <code class="classname">BResources</code> object by
this function; after <code class="methodname">AddResource()</code> returns, your application can free or
otherwise manipulate the buffer that data points to without affecting the
data that was written to the file.
</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code>.</span></p></td><td><p>The resource was successfully added.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_NOT_ALLOWED</code>.</span></p></td><td><p>The is open read-only.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_FILE_ERROR</code>.</span></p></td><td><p>The file's resource map doesn't exist or is invalid.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_BAD_VALUE</code>.</span></p></td><td><p>The <code class="parameter">data</code> pointer is <code class="constant">NULL</code>.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_NO_MEMORY</code>.</span></p></td><td><p>Not enough memory to add the resource to the file.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BResources_File"></a>File()</h4></div></div></div><code class="methodsynopsis cpp"><span class="modifier">const </span><span class="type"><a class="link" href="BFile.html" title="BFile"><code class="classname">BFile</code></a>&amp; </span><span class="methodname">File</span>() <span class="modifier">const</span>;</code><p>
Returns the <a class="link" href="BFile.html" title="BFile"><code class="classname">BFile</code></a>
the <code class="classname">BResource</code> object references.
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BResources_GetResourceInfo"></a>GetResourceInfo()</h4></div></div></div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">bool </span><span class="methodname">GetResourceInfo</span>(<span class="methodparam"><span class="type">int32 </span><span class="parameter">byIndex</span></span>,<br />                     <span class="methodparam"><span class="type">type_code* </span><span class="parameter">typeFound</span></span>,<br />                     <span class="methodparam"><span class="type">int32* </span><span class="parameter">idFound</span></span>,<br />                     <span class="methodparam"><span class="modifier">const </span><span class="type">char** </span><span class="parameter">nameFound</span></span>,<br />                     <span class="methodparam"><span class="type">size_t* </span><span class="parameter">lengthFound</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">bool </span><span class="methodname">GetResourceInfo</span>(<span class="methodparam"><span class="type">type_code </span><span class="parameter">byType</span></span>,<br />                     <span class="methodparam"><span class="type">int32 </span><span class="parameter">andIndex</span></span>,<br />                     <span class="methodparam"><span class="type">int32* </span><span class="parameter">idFound</span></span>,<br />                     <span class="methodparam"><span class="modifier">const </span><span class="type">char** </span><span class="parameter">nameFound</span></span>,<br />                     <span class="methodparam"><span class="type">size_t* </span><span class="parameter">lengthFound</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">bool </span><span class="methodname">GetResourceInfo</span>(<span class="methodparam"><span class="type">type_code </span><span class="parameter">byType</span></span>,<br />                     <span class="methodparam"><span class="type">int32 </span><span class="parameter">andId</span></span>,<br />                     <span class="methodparam"><span class="modifier">const </span><span class="type">char** </span><span class="parameter">nameFound</span></span>,<br />                     <span class="methodparam"><span class="type">size_t* </span><span class="parameter">lengthFound</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">bool </span><span class="methodname">GetResourceInfo</span>(<span class="methodparam"><span class="type">type_code </span><span class="parameter">byType</span></span>,<br />                     <span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">andName</span></span>,<br />                     <span class="methodparam"><span class="type">int32* </span><span class="parameter">idFound</span></span>,<br />                     <span class="methodparam"><span class="type">size_t* </span><span class="parameter">lengthFound</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">bool </span><span class="methodname">GetResourceInfo</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">void* </span><span class="parameter">byPointer</span></span>,<br />                     <span class="methodparam"><span class="type">type_code* </span><span class="parameter">typeFound</span></span>,<br />                     <span class="methodparam"><span class="type">int32* </span><span class="parameter">idFound</span></span>,<br />                     <span class="methodparam"><span class="type">size_t* </span><span class="parameter">lengthFound</span></span>,<br />                     <span class="methodparam"><span class="modifier">const </span><span class="type">char** </span><span class="parameter">nameFound</span></span>);</code>
</div><p>
These functions return information about a specific resource, as
identified by the first one or two arguments:
</p><ul class="itemizedlist"><li><p>
The first version (<code class="parameter">byIndex</code>) searches for the <code class="parameter">byIndex</code>'th resource in
the file.
</p></li><li><p>
The second (<code class="parameter">byType</code>/<code class="parameter">andIndex</code>)
searches for the <code class="parameter">byIndex</code>'th resource
that has the given type.
</p></li><li><p>
The third (<code class="parameter">byType</code>/<code class="parameter">andId</code>) looks for the resource with the unique
combination of type and ID.
</p></li><li><p>
The fourth (<code class="parameter">byType</code>/<code class="parameter">andName</code>)
looks for the first resource that has the
given type and name.
</p></li><li><p>
The last (<code class="parameter">byPointer</code>) returns information about the resource whose
data is pointed to by <code class="parameter">byPointer</code>. This can be used to trace a resource
that's already been loaded with
<a class="link" href="BResources.html#BResources_LoadResource" title="LoadResource()"><code class="methodname">LoadResource()</code></a>
back to its information.
</p></li></ul><p>
The other arguments return the other statistics about the resource (if
found).
</p><p>
The pointer that's returned in <code class="parameter">*foundName</code> belongs to the <code class="classname">BResources</code>.
Don't free it.
</p><p>
The functions return <code class="constant">true</code> if a resource was found
and <code class="constant">false</code> otherwise.
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BResources_HasResource"></a>HasResource()</h4></div></div></div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">bool </span><span class="methodname">HasResource</span>(<span class="methodparam"><span class="type">type_code </span><span class="parameter">type</span></span>,<br />                 <span class="methodparam"><span class="type">int32 </span><span class="parameter">id</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">bool </span><span class="methodname">HasResource</span>(<span class="methodparam"><span class="type">type_code </span><span class="parameter">type</span></span>,<br />                 <span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>);</code>
</div><p>
Returns <code class="constant">true</code> if the resource file contains a resource as identified by
the arguments, otherwise it returns <code class="constant">false</code>.
</p><p>
Keep in mind that there may be more than one resource in the file with
the same name and type combination. The type and id combo, on the other
hand, is unique. See
"<a class="xref" href="BResources_Overview.html#BResources_Identifying_A_Resource_Within_A_Resource_File" title="Identifying a Resource within a Resource File">Identifying a Resource within a Resource File</a>."
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BResources_LoadResource"></a>LoadResource()</h4></div></div></div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="modifier">const </span><span class="type">void* </span><span class="methodname">LoadResource</span>(<span class="methodparam"><span class="type">type_code </span><span class="parameter">type</span></span>,<br />                         <span class="methodparam"><span class="type">int32 </span><span class="parameter">id</span></span>,<br />                         <span class="methodparam"><span class="type">size_t* </span><span class="parameter">outSize</span></span>);</code>

<code class="methodsynopsis cpp"><span class="modifier">const </span><span class="type">void* </span><span class="methodname">LoadResource</span>(<span class="methodparam"><span class="type">type_code </span><span class="parameter">type</span></span>,<br />                         <span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                         <span class="methodparam"><span class="type">size_t* </span><span class="parameter">outSize</span></span>);</code>
</div><p>
Loads the specified resource into memory. The resource can be identified
by either type code and ID or by type code and name. See
"<a class="xref" href="BResources_Overview.html#BResources_Identifying_A_Resource_Within_A_Resource_File" title="Identifying a Resource within a Resource File">Identifying a Resource within a Resource File</a>."
</p><p>
The returned pointer belongs to the resource file; it's valid until the
resource gets changed. If an error occurs while trying to load the
resource, <code class="constant">NULL</code> is returned.
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BResources_MergeFrom"></a>MergeFrom()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">MergeFrom</span>(<span class="methodparam"><span class="type"><a class="link" href="BFile.html" title="BFile"><code class="classname">BFile</code></a>* </span><span class="parameter">fromFile</span></span>);</code><p>
Copies all the resource from the file specified by <code class="parameter">fromFile</code> into the file
targeted by the <code class="classname">BResources</code> object. The original file isn't changed. You
can do this to a file that's opened read-only, but the changes won't have
any effect.
</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code>.</span></p></td><td><p>The resources were copied without error.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_BAD_FILE</code>.</span></p></td><td><p>The resource map is empty.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_FILE_ERROR</code>.</span></p></td><td><p>A file error occurred, or the resource map is
nonexistent.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_IO_ERROR</code>.</span></p></td><td><p>An error occurred while writing the data.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_ERROR</code>.</span></p></td><td><p>Something else went wrong.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BResources_PreloadResourceType"></a>PreloadResourceType()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">PreloadResourceType</span>(<span class="methodparam"><span class="type">type_code </span><span class="parameter">type</span><span class="initializer"> = 0</span></span>);</code><p>
If you know you're going to need to access all resources of a particular
type, you can preload them all into memory in one shot using this
function. If you specify a type of 0, all resources of all types are
preloaded.
</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code>.</span></p></td><td><p>The resources were preloaded without error.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_BAD_FILE</code>.</span></p></td><td><p>The resource map is empty.</p></td></tr><tr><td><p><span class="term">Other values.</span></p></td><td><p>The returned value is the negative of the number of
errors that occurred while preloading resources; for example, if five
errors occurred, the result is -5.
</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BResources_RemoveResource"></a>RemoveResource()</h4></div></div></div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">RemoveResource</span>(<span class="methodparam"><span class="type">type_code </span><span class="parameter">type</span></span>,<br />                        <span class="methodparam"><span class="type">int32 </span><span class="parameter">id</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">RemoveResource</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">void* </span><span class="parameter">resource</span></span>);</code>
</div><p>
Removes the resource identified by the arguments. See
"<a class="xref" href="BResources_Overview.html#BResources_Identifying_A_Resource_Within_A_Resource_File" title="Identifying a Resource within a Resource File">Identifying a Resource within a Resource File</a>."
</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code>.</span></p></td><td><p>The resource was removed.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_FILE_ERROR</code>.</span></p></td><td><p>The file's resource map doesn't exist.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_NOT_ALLOWED</code>.</span></p></td><td><p>The file is opened read-only.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_NOT_ALLOWED</code>.</span></p></td><td><p>Couldn't find the specified resource, or an error
occurred trying to remove it (first form of
<a class="link" href="BResources.html#BResources_RemoveResource" title="RemoveResource()"><code class="methodname">RemoveResource()</code></a>).</p></td></tr><tr><td><p><span class="term"><code class="constant">B_ERROR</code>.</span></p></td><td><p>Couldn't find the specified resource, the pointer doesn't
indicate a valid resource, or an error occurred while removing the
resource (second form).</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BResources_SetTo"></a>SetTo()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">SetTo</span>(<span class="methodparam"><span class="type"><a class="link" href="BFile.html" title="BFile"><code class="classname">BFile</code></a>* </span><span class="parameter">file</span></span>,<br />               <span class="methodparam"><span class="type">bool </span><span class="parameter">clobber</span><span class="initializer"> = <span class="constant">false</span></span></span>);</code><p>
Unlocks and closes the object's previous
<a class="link" href="BFile.html" title="BFile"><code class="classname">BFile</code></a>, and re-initializes it to
refer to a copy of the argument. If the new BFile is open for writing,
the <code class="classname">BResources</code>' copy of the
<a class="link" href="BFile.html" title="BFile"><code class="classname">BFile</code></a> is locked.
</p><p>
If <code class="parameter">clobber</code> is <code class="constant">true</code>, the file that's
referred to by <a class="link" href="BFile.html" title="BFile"><code class="classname">BFile</code></a> is truncated
(it's data is erased), and a new resource file header is written to the
file. If <code class="parameter">clobber</code> is <code class="constant">false</code> and the file doesn't otherwise doesn't have a
resource header, the initialization fails.
</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code>.</span></p></td><td><p>The resource was removed.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_BAD_VALUE</code>.</span></p></td><td><p>The argument
<a class="link" href="BFile.html" title="BFile"><code class="classname">BFile</code></a> is invalid (uninitialized).</p></td></tr><tr><td><p><span class="term"><code class="constant">B_ERROR</code>.</span></p></td><td><p>The <code class="classname">BResources</code>
couldn't be initialized (for whatever reason).</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BResources_Sync"></a>Sync()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">Sync</span>();</code><p>
Updates all changed resources on disk. This actually rewrites the entire
resource file, so be aware of this when designing your code. This is a
very good reason not to use <code class="classname">BResources</code> for anything other than permanent,
nonchanging application data, and only developer tools should write to
resource files.
</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code>.</span></p></td><td><p>The resources were updated without error.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_BAD_FILE</code>.</span></p></td><td><p>The resource map is empty.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_NOT_ALLOWED</code>.</span></p></td><td><p>The file is opened read-only.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_FILE_ERROR</code>.</span></p></td><td><p>A file error occurred.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_IO_ERROR</code>.</span></p></td><td><p>An error occurred while writing the data.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BResources_WriteTo"></a>WriteTo()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">WriteTo</span>(<span class="methodparam"><span class="type"><a class="link" href="BFile.html" title="BFile"><code class="classname">BFile</code></a>* </span><span class="parameter">newFile</span></span>);</code><p>
Writes all the file's resources into a new file. After this function
returns, the <code class="classname">BResources</code> object is targeted on the new
<a class="link" href="BFile.html" title="BFile"><code class="classname">BFile</code></a>; all future
operations will be done in the new file.
</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code>.</span></p></td><td><p>The resources were written without error.</p></td></tr><tr><td><p><span class="term">Other errors.</span></p></td><td><p>File errors indicating problems copying the data.</p></td></tr></tbody></table></div></div></div><div id="footer"><hr /><div id="footerT">Prev: <a href="BRefFilter.html">BRefFilter</a>  Up: <a href="TheStorageKit.html">The Storage Kit</a>  Next: <a href="BStatable.html">BStatable</a> </div><div id="footerB"><div id="footerBL"><a href="BRefFilter.html" title="BRefFilter"><img src="./images/navigation/prev.png" alt="Prev" /></a> <a href="TheStorageKit.html" title="The Storage Kit"><img src="./images/navigation/up.png" alt="Up" /></a> <a href="BStatable.html" title="BStatable"><img src="./images/navigation/next.png" alt="Next" /></a></div><div id="footerBR"><div><a href="http://www.haiku-os.org"><img src="./images/People_24.png" alt="haiku-os.org" title="Visit The Haiku Website" /></a></div><div class="navighome" title="Home"><a accesskey="h" href="index.html"><img src="./images/navigation/home.png" alt="Home" /></a></div></div><div id="footerBC"><a href="http://www.access-company.com/home.html" title="ACCESS Co."><img alt="Access Company" src="./images/access_logo.png" /></a></div></div></div><div id="licenseFooter"><div id="licenseFooterBL"><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/" title="Creative Commons License"><img alt="Creative Commons License" style="border-width:0" src="https://licensebuttons.net/l/by-nc-nd/3.0/88x31.png" /></a></div><div id="licenseFooterBR"><a href="./LegalNotice.html">Legal Notice</a></div><div id="licenseFooterBC"><span id="licenseText">This work is licensed under a
          <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative
          Commons Attribution-Non commercial-No Derivative Works 3.0 License</a>.</span></div></div><!-- Fathom -->
<script>
(function(f, a, t, h, o, m){
	a[h]=a[h]||function(){
		(a[h].q=a[h].q||[]).push(arguments)
	};
	o=f.createElement('script'),
	m=f.getElementsByTagName('script')[0];
	o.async=1; o.src=t; o.id='fathom-script';
	m.parentNode.insertBefore(o,m)
})(document, window, 'https://metrics.haiku-os.org/tracker.js', 'fathom');
fathom('trackPageview');
</script>
<!-- / Fathom --></body></html>
